<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blog - BranTech Solutions</title>
  <meta name="description" content="Latest insights, tutorials, and industry trends from BranTech Solutions - your guide to cutting-edge technology.">
  <meta name="keywords" content="tech blog, web development, digital innovation, technology trends, tutorials">
  
  <!-- Favicon -->
  <link rel="icon" href="images/logo.jpg" type="image/jpeg">
  
  <!-- Three.js for 3D magic -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  
  <!-- CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <link rel="stylesheet" href="header-styles.css"/>
  <link rel="stylesheet" href="styles2.css"/>
  <link rel="stylesheet" href="chat-assistant.css"/>
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --magic-dark: #0a0a0f;
      --magic-blue: #00d4ff;
      --magic-teal: #00ffb3;
      --magic-violet: #8b5cf6;
      --magic-glow: rgba(0, 212, 255, 0.3);
      --magic-text: #e0e7ff;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      background: #1a1a2e;
      color: var(--magic-text);
      font-family: 'Inter', sans-serif;
      overflow-x: hidden;
      cursor: auto;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      transition: all 0.3s ease;
    }
    
    /* Light Mode */
    body.light-mode {
      background: #f8fafc;
      color: #1e293b;
    }
    
    body.light-mode .blog-card {
      background: rgba(255, 255, 255, 0.9);
      border: 1px solid rgba(0, 0, 0, 0.1);
      color: #1e293b;
    }
    
    body.light-mode .blog-card-title {
      color: #1e293b;
    }
    
    body.light-mode .blog-card-excerpt {
      color: rgba(0, 0, 0, 0.7);
    }
    
    body.light-mode .blog-card-full-text {
      color: rgba(0, 0, 0, 0.8);
    }
    
    body.light-mode .category-card {
      background: rgba(255, 255, 255, 0.9);
      border: 1px solid rgba(0, 0, 0, 0.1);
    }
    
    body.light-mode .category-name {
      color: #1e293b;
    }
    
    body.light-mode .category-count {
      color: rgba(0, 0, 0, 0.6);
    }
    
    body.light-mode .newsletter-title,
    body.light-mode .categories-title {
      color: #1e293b;
    }
    
    body.light-mode .newsletter-subtitle {
      color: rgba(0, 0, 0, 0.7);
    }
    
    /* Theme Toggle Button */
    .theme-toggle {
      position: fixed;
      top: 100px;
      right: 20px;
      z-index: 1000;
      background: var(--magic-blue);
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      color: white;
      font-size: 1.2rem;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 212, 255, 0.3);
    }
    
    .theme-toggle:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 20px rgba(0, 212, 255, 0.4);
    }
    
    body.light-mode .theme-toggle {
      background: #1e293b;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }
    

    
    /* Blog Hero Section */
    .blog-hero {
      position: relative;
      height: 60vh;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      margin-top: 80px;
    }
    
    #blog-canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
    }
    
    .blog-hero-content {
      position: relative;
      z-index: 10;
      text-align: center;
      max-width: 800px;
      padding: 0 2rem;
    }
    
    .blog-title {
      font-family: 'Orbitron', monospace;
      font-size: clamp(2.5rem, 6vw, 4rem);
      font-weight: 900;
      color: #ffffff;
      margin-bottom: 1rem;
    }
    
    .blog-subtitle {
      font-size: 1.25rem;
      color: rgba(255, 255, 255, 0.8);
      margin-bottom: 2rem;
    }
    
    /* Blog Container */
    .blog-container {
      position: relative;
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem 2rem;
      z-index: 10;
    }
    
    /* Blog Grid */
    .blog-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-bottom: 4rem;
    }
    
    /* Blog Card */
    .blog-card {
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 0;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }
    
    .blog-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      border-color: rgba(255, 255, 255, 0.2);
    }
    
    @keyframes rotate {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .blog-card-image {
      width: 100%;
      height: 120px;
      border-radius: 12px 12px 0 0;
      position: relative;
      overflow: hidden;
      background: #2a2a3e;
    }
    
    .blog-card-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s ease;
    }
    
    .blog-card:hover .blog-card-image img {
      transform: scale(1.05);
    }
    
    .blog-card-content {
      padding: 1.2rem;
      position: relative;
      z-index: 2;
    }
    
    .blog-card-date {
      color: var(--magic-teal);
      font-size: 0.9rem;
      font-weight: 500;
      margin-bottom: 0.5rem;
    }
    
    .blog-card-title {
      font-size: 1.1rem;
      font-weight: 700;
      color: #ffffff;
      margin-bottom: 0.6rem;
      line-height: 1.3;
    }
    
    .blog-card-excerpt {
      color: rgba(255, 255, 255, 0.7);
      line-height: 1.4;
      margin-bottom: 0.8rem;
      font-size: 0.85rem;
    }
    
    .blog-card-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-bottom: 1rem;
    }
    
    .blog-tag {
      background: rgba(0, 212, 255, 0.2);
      color: var(--magic-blue);
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 500;
    }
    
    .blog-read-more {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--magic-blue);
      font-weight: 600;
      text-decoration: none;
      transition: all 0.3s ease;
    }
    
    .blog-read-more:hover {
      color: var(--magic-teal);
      transform: translateX(5px);
    }
    
    /* Expanded Card Styles */
    .blog-card.expanded {
      grid-column: 1 / -1;
      max-height: none;
    }
    
    .blog-card-full-content {
      display: none;
      padding-top: 1rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      margin-top: 1rem;
    }
    
    .blog-card.expanded .blog-card-full-content {
      display: block;
    }
    
    .blog-card-full-text {
      color: rgba(255, 255, 255, 0.8);
      line-height: 1.6;
      font-size: 0.9rem;
      margin-bottom: 1rem;
    }
    
    .blog-collapse {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--magic-violet);
      font-weight: 600;
      text-decoration: none;
      transition: all 0.3s ease;
      cursor: pointer;
    }
    
    .blog-collapse:hover {
      color: var(--magic-blue);
      transform: translateX(-5px);
    }
    
    /* Featured Post */
    .featured-post {
      grid-column: 1 / -1;
      background: rgba(139, 92, 246, 0.1);
      border-color: rgba(139, 92, 246, 0.3);
    }
    
    .featured-post .blog-card-image {
      height: 160px;
    }
    
    .featured-badge {
      position: absolute;
      top: 1rem;
      left: 1rem;
      background: var(--magic-violet);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
      z-index: 3;
    }
    
    /* Categories Section */
    .categories-section {
      margin-bottom: 4rem;
    }
    
    .categories-title {
      font-family: 'Orbitron', monospace;
      font-size: 2rem;
      font-weight: 700;
      color: #ffffff;
      text-align: center;
      margin-bottom: 2rem;
    }
    
    .categories-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
    }
    
    .category-card {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 2rem;
      text-align: center;
      transition: all 0.3s ease;
      cursor: pointer;
    }
    
    .category-card:hover {
      transform: translateY(-3px);
      border-color: rgba(255, 255, 255, 0.2);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    }
    
    /* Login Modal */
    .login-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    
    .login-modal.show {
      display: flex;
    }
    
    .login-form {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 16px;
      padding: 2rem;
      width: 90%;
      max-width: 400px;
      text-align: center;
    }
    
    .login-form h3 {
      color: #ffffff;
      margin-bottom: 1.5rem;
      font-size: 1.5rem;
    }
    
    .login-form input {
      width: 100%;
      padding: 0.8rem;
      margin-bottom: 1rem;
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.1);
      color: #ffffff;
    }
    
    .login-form input::placeholder {
      color: rgba(255, 255, 255, 0.6);
    }
    
    .login-form button {
      width: 100%;
      padding: 0.8rem;
      background: linear-gradient(45deg, var(--magic-blue), var(--magic-teal));
      border: none;
      border-radius: 8px;
      color: #ffffff;
      font-weight: 600;
      cursor: pointer;
      margin-bottom: 1rem;
    }
    
    .login-form .close-btn {
      background: rgba(255, 255, 255, 0.2);
      margin-bottom: 0;
    }
    
    .auth-toggle {
      color: var(--magic-blue);
      cursor: pointer;
      text-decoration: underline;
      margin-top: 1rem;
    }ransform: translateY(-3px);
      border-color: rgba(255, 255, 255, 0.2);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    }
    
    .category-icon {
      font-size: 2.5rem;
      color: var(--magic-blue);
      margin-bottom: 1rem;
      animation: pulse 2s ease-in-out infinite;
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    
    .category-name {
      font-size: 1.2rem;
      font-weight: 600;
      color: #ffffff;
      margin-bottom: 0.5rem;
    }
    
    .category-count {
      color: rgba(255, 255, 255, 0.6);
      font-size: 0.9rem;
    }
    
    /* Newsletter Section */
    .newsletter-section {
      text-align: center;
      margin-bottom: 4rem;
      padding: 2rem 0;
    }
    
    .newsletter-title {
      font-family: 'Orbitron', monospace;
      font-size: 1.8rem;
      font-weight: 700;
      color: #ffffff;
      margin-bottom: 0.8rem;
    }
    
    .newsletter-subtitle {
      color: rgba(255, 255, 255, 0.7);
      margin-bottom: 1.5rem;
      font-size: 1rem;
    }
    
    .newsletter-form {
      display: flex;
      gap: 0.8rem;
      max-width: 400px;
      margin: 0 auto;
    }
    
    .newsletter-input {
      flex: 1;
      padding: 0.8rem;
      border: 1px solid rgba(0, 212, 255, 0.3);
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.1);
      color: #ffffff;
      font-size: 0.9rem;
    }
    
    .newsletter-button {
      padding: 0.8rem 1.5rem;
      background: linear-gradient(45deg, var(--magic-blue), var(--magic-teal));
      border: none;
      border-radius: 8px;
      color: #ffffff;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.9rem;
    }
    
    .newsletter-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 15px rgba(0, 212, 255, 0.3);
    }
    
    @media (max-width: 768px) {
      body { cursor: auto; }
      .blog-hero { height: 50vh; margin-top: 60px; }
      .blog-title { font-size: 2rem; }
      .blog-container { padding: 2rem 1rem; }
      .blog-grid { grid-template-columns: 1fr; gap: 1.2rem; }
      .blog-card-content { padding: 1rem; }
      .blog-card-image { height: 100px; }
      .featured-post .blog-card-image { height: 140px; }
      .newsletter-form { flex-direction: column; }
      .newsletter-section { padding: 1.5rem 0; }
      .categories-grid { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); }
    }
  </style>
</head>
<body>

  <!-- Navigation -->
  <div id="header"></div>


  
  <!-- Blog Hero Section -->
  <section class="blog-hero">
    <canvas id="blog-canvas"></canvas>
    <div class="blog-hero-content">
      <div class="inline-flex items-center px-4 py-2 bg-cyan-500/20 rounded-full mb-6 border border-cyan-500/30">
        <i class="fas fa-blog text-cyan-400 mr-2"></i>
        <span class="text-cyan-300 text-sm font-medium">Tech Insights & Innovation</span>
      </div>
      <h1 class="blog-title">BranTech Blog</h1>
      <p class="blog-subtitle">Discover the latest in technology, innovation, and digital transformation</p>
    </div>
  </section>

  <!-- Blog Container -->
  <div class="blog-container">

    
    <!-- Categories Section -->
    <section class="categories-section">
      <h2 class="categories-title">Explore Categories</h2>
      <div class="categories-grid">
        <div class="category-card" onclick="filterByCategory('Web Development')">
          <i class="fas fa-code category-icon"></i>
          <h3 class="category-name">Web Development</h3>
          <p class="category-count" id="webdev-count">0 posts</p>
        </div>
        <div class="category-card" onclick="filterByCategory('AI & Machine Learning')">
          <i class="fas fa-robot category-icon"></i>
          <h3 class="category-name">AI & Machine Learning</h3>
          <p class="category-count" id="ai-count">0 posts</p>
        </div>
        <div class="category-card" onclick="filterByCategory('Digital Marketing')">
          <i class="fas fa-chart-line category-icon"></i>
          <h3 class="category-name">Digital Marketing</h3>
          <p class="category-count" id="marketing-count">0 posts</p>
        </div>
        <div class="category-card" onclick="filterByCategory('Tech Trends')">
          <i class="fas fa-trending-up category-icon"></i>
          <h3 class="category-name">Tech Trends</h3>
          <p class="category-count" id="trends-count">0 posts</p>
        </div>
      </div>
    </section>

    <!-- Blog Grid -->
    <div id="blogGrid" class="blog-grid">
      <!-- Blog posts will be loaded here -->
    </div>

    <!-- Newsletter Section -->
    <section class="newsletter-section">
      <h2 class="newsletter-title">Stay Updated</h2>
      <p class="newsletter-subtitle">Get the latest tech insights delivered to your inbox</p>
      <form class="newsletter-form">
        <input type="email" class="newsletter-input" placeholder="Enter your email" required>
        <button type="submit" class="newsletter-button">Subscribe</button>
      </form>
    </section>
  </div>

  <!-- Login Modal -->
  <div id="loginModal" class="login-modal">
    <div class="login-form">
      <h3 id="authTitle">Login to Continue Reading</h3>
      <form id="authForm">
        <input type="email" id="email" placeholder="Email" required>
        <input type="password" id="password" placeholder="Password" required>
        <div id="signupFields" style="display: none;">
          <input type="text" id="fullName" placeholder="Full Name">
        </div>
        <button type="submit" id="authSubmit">Login</button>
      </form>
      <p class="auth-toggle" onclick="toggleAuthMode()">Don't have an account? Sign up</p>
      <button class="close-btn" onclick="closeLoginModal()">Close</button>
    </div>
  </div>

  <!-- Custom Cursor -->
  <div class="magic-cursor"></div>

  <!-- Footer -->
  <div id="footer"></div>

  <!-- Chat Assistant -->
  <div id="chatAssistant" class="chat-assistant">
    <div id="chatToggle" class="chat-toggle">
      <svg class="chat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
      </svg>
      <div class="chat-notification" id="chatNotification" style="display: none;"></div>
    </div>
    <div id="chatWindow" class="chat-window">
      <div class="chat-header">
        <div class="chat-header-info">
          <div class="chat-avatar">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
              <circle cx="12" cy="7" r="4"/>
            </svg>
          </div>
          <div class="chat-header-text">
            <h3>BranTech Assistant</h3>
            <p>How can I help you today?</p>
          </div>
        </div>
        <button id="chatClose" class="chat-close">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div id="chatMessages" class="chat-messages">
        <div class="chat-welcome">
          <div class="welcome-message">
            <div class="welcome-avatar">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
              </svg>
            </div>
            <div class="welcome-text">
              <p>Hello! I'm your BranTech Solutions assistant. I can help you with:</p>
              <ul>
                <li>Our services and solutions</li>
                <li>Project inquiries</li>
                <li>Technical support</li>
                <li>General questions</li>
              </ul>
              <p>What would you like to know?</p>
            </div>
          </div>
        </div>
      </div>
      <div class="chat-input-container">
        <div class="chat-input-wrapper">
          <input type="text" id="chatInput" class="chat-input" placeholder="Type your message..." maxlength="500">
          <button id="chatSend" class="chat-send" disabled>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="22" y1="2" x2="11" y2="13"/>
              <polygon points="22,2 15,22 11,13 2,9 22,2"/>
            </svg>
          </button>
        </div>
        <div class="chat-typing" id="chatTyping" style="display: none;">
          <div class="typing-indicator">
            <span></span>
            <span></span>
            <span></span>
          </div>
          <span>BranTech Assistant is typing...</span>
        </div>
      </div>
    </div>
  </div>

  <script src="components.js"></script>
  <script src="chat-assistant.js"></script>
  
  <script>
    // Blog Hero Animation
    function initBlogHero() {
      const canvas = document.getElementById('blog-canvas');
      if (!canvas) return;
      
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(75, canvas.offsetWidth / canvas.offsetHeight, 0.1, 1000);
      const renderer = new THREE.WebGLRenderer({ canvas: canvas, alpha: true });
      
      renderer.setSize(canvas.offsetWidth, canvas.offsetHeight);
      
      // Create floating particles
      const geometry = new THREE.BufferGeometry();
      const vertices = [];
      
      for (let i = 0; i < 1000; i++) {
        vertices.push(
          (Math.random() - 0.5) * 2000,
          (Math.random() - 0.5) * 2000,
          (Math.random() - 0.5) * 2000
        );
      }
      
      geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));
      
      const material = new THREE.PointsMaterial({
        color: 0x00d4ff,
        size: 2,
        transparent: true,
        opacity: 0.6
      });
      
      const particles = new THREE.Points(geometry, material);
      scene.add(particles);
      
      camera.position.z = 1000;
      
      function animate() {
        requestAnimationFrame(animate);
        
        particles.rotation.x += 0.0005;
        particles.rotation.y += 0.001;
        
        renderer.render(scene, camera);
      }
      
      animate();
      
      // Handle resize
      window.addEventListener('resize', () => {
        camera.aspect = canvas.offsetWidth / canvas.offsetHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(canvas.offsetWidth, canvas.offsetHeight);
      });
    }
  
  <script>
    const API_BASE = window.location.hostname === 'localhost' ? 'http://localhost:8000/api' : '/api';
    let allPosts = [];
    
    // Load blog posts from Django API
    async function loadBlogPosts() {
      try {
        console.log('Attempting to fetch from:', `${API_BASE}/posts/`);
        const response = await fetch(`${API_BASE}/posts/`);
        console.log('Response status:', response.status);
        
        if (response.ok) {
          allPosts = await response.json();
          console.log('Loaded posts:', allPosts);
          displayBlogPosts(allPosts);
          updateCategoryCounts();
        } else {
          console.error('API response not ok:', response.status, response.statusText);
          loadStaticPosts();
        }
      } catch (error) {
        console.error('API fetch error:', error);
        loadStaticPosts();
      }
    }
    
    // Display blog posts
    function displayBlogPosts(posts) {
      const blogGrid = document.getElementById('blogGrid');
      
      if (posts.length === 0) {
        blogGrid.innerHTML = '<p class="text-center text-white">No blog posts available.</p>';
        return;
      }
      
      blogGrid.innerHTML = posts.map((post, index) => {
        const isFirstPost = index === 0 && post.featured;
        const imageUrl = post.image ? (window.location.hostname === 'localhost' ? `http://localhost:8000${post.image}` : post.image) : 'https://images.unsplash.com/photo-1518709268805-4e9042af2176?auto=format&fit=crop&w=800&q=80';
        
        return `
          <article class="blog-card ${isFirstPost ? 'featured-post' : ''}" onclick="trackView(${post.id})">
            ${isFirstPost ? '<div class="featured-badge">Featured</div>' : ''}
            <div class="blog-card-image">
              <img src="${imageUrl}" alt="${post.title}" loading="lazy">
            </div>
            <div class="blog-card-content">
              <div class="blog-card-date">${new Date(post.created_at).toLocaleDateString()}</div>
              <h2 class="blog-card-title">${post.title}</h2>
              <p class="blog-card-excerpt">${post.excerpt}</p>
              <div class="blog-card-tags">
                ${post.tags_list ? post.tags_list.map(tag => `<span class="blog-tag">${tag}</span>`).join('') : ''}
              </div>
              <div class="flex justify-between items-center">
                <a href="#" class="blog-read-more" onclick="event.stopPropagation(); checkAuthAndExpand(this, ${post.id})">
                  Read More <i class="fas fa-arrow-right"></i>
                </a>
                <span class="text-sm text-gray-400">
                  <i class="fas fa-eye mr-1"></i>${post.view_count || 0} views
                </span>
              </div>
            </div>
            <div class="blog-card-full-content">
              <div class="blog-card-full-text">
                ${post.content || 'Full article content would be displayed here. This is a sample of how the expanded content would look when users click "Read More". The content would include the complete article text, images, and any other media associated with the blog post.'}
              </div>
              <a href="#" class="blog-collapse" onclick="event.stopPropagation(); collapseCard(this)">
                <i class="fas fa-arrow-left"></i> Show Less
              </a>
            </div>
          </article>
        `;
      }).join('');
    }
    
    // Track blog post views
    async function trackView(postId) {
      try {
        await fetch(`${API_BASE}/posts/${postId}/increment_view/`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          }
        });
      } catch (error) {
        console.log('View tracking not available:', error);
      }
    }
    
    // Update category counts
    function updateCategoryCounts() {
      const categories = {
        'Web Development': 0,
        'AI & Machine Learning': 0,
        'Digital Marketing': 0,
        'Tech Trends': 0
      };
      
      allPosts.forEach(post => {
        if (categories.hasOwnProperty(post.category)) {
          categories[post.category]++;
        }
      });
      
      document.getElementById('webdev-count').textContent = `${categories['Web Development']} posts`;
      document.getElementById('ai-count').textContent = `${categories['AI & Machine Learning']} posts`;
      document.getElementById('marketing-count').textContent = `${categories['Digital Marketing']} posts`;
      document.getElementById('trends-count').textContent = `${categories['Tech Trends']} posts`;
    }
    
    // Filter by category
    function filterByCategory(category) {
      const filteredPosts = allPosts.filter(post => post.category === category);
      displayBlogPosts(filteredPosts);
    }
    
    // Fallback static posts
    function loadStaticPosts() {
      const staticPosts = [
        {
          id: 1,
          title: "The Future of Web Development: Trends to Watch in 2024",
          excerpt: "Explore the cutting-edge technologies and methodologies shaping the future of web development.",
          content: "Web development is constantly evolving, with new technologies and frameworks emerging regularly. In this comprehensive guide, we'll explore the cutting-edge tools and methodologies that are shaping the future of web development. From progressive web apps to serverless architectures, discover what's next in the world of web technology. Modern frameworks like React, Vue, and Angular continue to push the boundaries of what's possible in web applications. The rise of JAMstack architecture has revolutionized how we think about static sites and dynamic content. With the advent of WebAssembly, we're seeing near-native performance in web browsers, opening up new possibilities for complex applications that were previously only possible as desktop software.",
          image: "https://images.unsplash.com/photo-1461749280684-dccba630e2f6?w=400",
          tags_list: ["Web Development", "Technology", "Trends"],
          category: "Web Development",
          featured: true,
          view_count: 245,
          created_at: new Date().toISOString()
        },
        {
          id: 2,
          title: "AI Integration in Modern Applications",
          excerpt: "How artificial intelligence is revolutionizing user experiences and business processes.",
          content: "Artificial Intelligence is no longer a futuristic concept—it's here and transforming how we build and interact with applications. This article delves into practical AI integration strategies, from chatbots and recommendation systems to predictive analytics and automated workflows. Learn how to leverage AI to create smarter, more intuitive applications. Machine learning models are becoming more accessible through cloud APIs and pre-trained models. Natural language processing has reached a point where chatbots can handle complex customer service scenarios.",
          image: "https://images.unsplash.com/photo-1555255707-c07966088b7b?w=400",
          tags_list: ["AI", "Machine Learning", "Innovation"],
          category: "AI & Machine Learning",
          featured: false,
          view_count: 189,
          created_at: new Date().toISOString()
        }
      ];
      
      allPosts = staticPosts;
      displayBlogPosts(allPosts);
      updateCategoryCounts();
    }
    
    // Custom cursor
    function initCursor() {
      const cursor = document.querySelector('.magic-cursor');
      
      document.addEventListener('mousemove', (e) => {
        cursor.style.left = e.clientX - 10 + 'px';
        cursor.style.top = e.clientY - 10 + 'px';
      });
    }
    
    // Test API connectivity
    async function testAPI() {
      try {
        const response = await fetch(`${API_BASE}/posts/`);
        console.log('API Test - Status:', response.status);
        console.log('API Test - Headers:', response.headers);
        const data = await response.json();
        console.log('API Test - Data:', data);
        return true;
      } catch (error) {
        console.error('API Test - Error:', error);
        return false;
      }
    }
    
    // Check authentication before expanding
    function checkAuthAndExpand(element, postId) {
      if (isLoggedIn()) {
        expandCard(element, postId);
      } else {
        showLoginModal();
        window.pendingExpand = { element, postId };
      }
    }
    
    // Expand card function
    function expandCard(element, postId) {
      const card = element.closest('.blog-card');
      card.classList.add('expanded');
      trackView(postId);
    }
    
    // Authentication functions
    function isLoggedIn() {
      return localStorage.getItem('blogUser') !== null;
    }
    
    function showLoginModal() {
      document.getElementById('loginModal').classList.add('show');
    }
    
    function closeLoginModal() {
      document.getElementById('loginModal').classList.remove('show');
    }
    
    let isSignupMode = false;
    
    function toggleAuthMode() {
      isSignupMode = !isSignupMode;
      const title = document.getElementById('authTitle');
      const submit = document.getElementById('authSubmit');
      const toggle = document.querySelector('.auth-toggle');
      const signupFields = document.getElementById('signupFields');
      
      if (isSignupMode) {
        title.textContent = 'Sign Up to Continue Reading';
        submit.textContent = 'Sign Up';
        toggle.textContent = 'Already have an account? Login';
        signupFields.style.display = 'block';
      } else {
        title.textContent = 'Login to Continue Reading';
        submit.textContent = 'Login';
        toggle.textContent = "Don't have an account? Sign up";
        signupFields.style.display = 'none';
      }
    }
    
    // Handle auth form submission
    document.getElementById('authForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      
      if (isSignupMode) {
        const fullName = document.getElementById('fullName').value;
        // Simple signup - store user data
        localStorage.setItem('blogUser', JSON.stringify({ email, fullName }));
        alert('Account created successfully!');
      } else {
        // Simple login - just store email
        localStorage.setItem('blogUser', JSON.stringify({ email }));
      }
      
      closeLoginModal();
      
      // If there was a pending expand, execute it
      if (window.pendingExpand) {
        expandCard(window.pendingExpand.element, window.pendingExpand.postId);
        window.pendingExpand = null;
      }
    });
    
    // Collapse card function
    function collapseCard(element) {
      const card = element.closest('.blog-card');
      card.classList.remove('expanded');
    }
    

    
    // Initialize blog
    document.addEventListener('DOMContentLoaded', () => {
      console.log('DOM loaded, API_BASE:', API_BASE);
      initBlogHero();
      testAPI().then(success => {
        console.log('API test result:', success);
        loadBlogPosts();
      });
      initCursor();
      
      // Close modal when clicking outside
      document.getElementById('loginModal').addEventListener('click', function(e) {
        if (e.target === this) {
          closeLoginModal();
        }
      });
    });
  </script>
</body>
</html>